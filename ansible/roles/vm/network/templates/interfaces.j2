# This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

source /etc/network/interfaces.d/*

# The loopback network interface
auto lo
iface lo inet loopback

# The primary network interface
auto {{ network.primary.interface }}
iface {{ network.primary.interface }} inet static
  address {{ network.primary.ip }}
  netmask {{ network.primary.mask }}
  gateway {{ network.primary.gateway }}
  pre-up echo 0 > /proc/sys/net/ipv6/conf/$IFACE/accept_ra
  pre-up echo 0 > /proc/sys/net/ipv6/conf/$IFACE/autoconf

{% if 'secondary' in network %}
# Secondary network interfaces
{% for iface, v in network['secondary'].items() %}
auto {{ iface }}
iface {{ iface }} inet static
  address {{ v.ip }}
  netmask {{ v.mask }}
  pre-up echo 0 > /proc/sys/net/ipv6/conf/$IFACE/accept_ra
  pre-up echo 0 > /proc/sys/net/ipv6/conf/$IFACE/autoconf

{% endfor %}
{% endif %}
